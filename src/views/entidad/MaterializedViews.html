<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="TDM_Report">
        <link rel="stylesheet" type="text/css" media="screen" href="classic_blue_left.css" title="report">
        <link rel="stylesheet" type="text/css" media="print" href="classic_blue_left_NoFrames_print.css" title="report">
            <script src="tdmShowDetails.js" type="text/javascript"></script>
        <title>Toad Data Modeler - HTML Report</title>
    </head>

<body onLoad="getUrlItem()"><div class="mainContainer"><div id="headerContainer"><div id="header"><div class="title1"></div><div class="title2">Materialized Views</div><div class="reportStats">martes, 12 de mayo de 2020 12:04:23 p. m.</div><div class="titleimage"><a href="https://www.quest.com/" target="_blank"><img src="Img/logo.png" alt="Made with Toad Data Modeler" border="0" /></a></div><div class="headerEnd"><p>&nbsp;</p></div></div><div id="navTop"><ul><li><a href="MInfo.html">Model Info</a></li><li><a href="MImage.html">ER Diagram</a></li><li><a href="Tables.html">Entities</a></li><li><a href="Columns.html">Attributes</a></li><li><a href="Indexes.html">Indexes</a></li><li><a href="Keys.html">Keys</a></li><li><a href="Relations.html">Relationships</a></li><li class="selLi"><a href="MaterializedViews.html" class="selAnchor">Materialized Views</a></li><li><a href="Tablespaces.html">Tablespaces</a></li><li><a href="Users.html">Users</a></li></ul><div id="navTopEnd"><p>&nbsp;</p></div></div></div><div id="navCombo"><form name="allItems" action=""><select name="listOfItems" onChange="showSelected()"><option value="MView_{48F64F05-BCC4-4D78-836B-DB443B2C0392}">BI_BM_ENT.TTC_VM_OPP_DET_FUNEL</option><option value="MView_{087F8D27-7D76-4540-B34A-0DEB432C94B7}">BI_BM_ENT.TTC_VM_OPP_FUNEL</option><option value="MView_{C4CE5138-1962-4AE7-B00F-E52090D0F7BC}">BI_BM_ENT.TTC_VM_OPP_FUNEL_TEST</option><option value="MView_{6A672F35-46D5-484D-8021-7A9B66B5F9AD}">MaterializedView1</option></select></form><div id="navComboEnd"><p></p></div></div><div id="navLeft"><div id="bookmark"><ul><li><a onClick="return showDetail('MView_{48F64F05-BCC4-4D78-836B-DB443B2C0392}', this)">BI_BM_ENT.TTC_VM_OPP_DET_FUNEL</a></li><li><a onClick="return showDetail('MView_{087F8D27-7D76-4540-B34A-0DEB432C94B7}', this)">BI_BM_ENT.TTC_VM_OPP_FUNEL</a></li><li><a onClick="return showDetail('MView_{C4CE5138-1962-4AE7-B00F-E52090D0F7BC}', this)">BI_BM_ENT.TTC_VM_OPP_FUNEL_TEST</a></li><li><a onClick="return showDetail('MView_{6A672F35-46D5-484D-8021-7A9B66B5F9AD}', this)">MaterializedView1</a></li></ul><div id="bookmarkEnd"><p>&nbsp;</p></div></div></div><div class="separator" ></div><div class="container"><div id="content"><div id="MView_{48F64F05-BCC4-4D78-836B-DB443B2C0392}" class="item">
<a name = "MView_{48F64F05-BCC4-4D78-836B-DB443B2C0392}"></a>
<div class="caption1"><p>BI_BM_ENT.TTC_VM_OPP_DET_FUNEL</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Caption</td>
<td class="tabdata" width="90%">TTC_VM_OPP_DET_FUNEL</td>
</tr>
<tr>
<td class="tabhead" width="10%">Column Aliases</td>
<td class="tabdata" width="90%">"ID","WIDMT_OPORTUNIDAD_DETALLE","WIDMT_OPORTUNIDAD","CURRENCYISOCODE","TOTALPRICE","UNITPRICE","LISTPRICE","CREATEDDATE","WIDDIM_USUARIO_CREATEDBY","LASTMODIFIEDDATE","WIDDIM_USUARIO_LASTMODBY","DESTINO_ENTRECALLES","DESTINO_EMPRESA","DESTINO_UBICACION","DESTINO_PAIS","VENTA_NETA","DESCT","FECHA_LUN","FECHA_DOM","FAMILIA_PRODUCTO_LUN","FAMILIA_PRODUCTO_DOM","FAMILIA_PRODUCTO_DIF","FAMILIA_PRODUCTO_MATCH","NAME_LUN","NAME_DOM","NAME_DIF","NAME_MATCH","QUANTITY_LUN","QUANTITY_DOM","QUANTITY_DIF","DESTINO_CALLENUMERO_LUN","DESTINO_CALLENUMERO_DOM","DESTINO_CALLENUMERO_DIF","DESTINO_CALLENUMERO_MATCH","DESTINO_PISO_LUN","DESTINO_PISO_DOM","DESTINO_PISO_DIF","DESTINO_PISO_MATCH","DESTINO_COLONIA_LUN","DESTINO_COLONIA_DOM","DESTINO_COLONIA_DIF","DESTINO_COLONIA_MATCH","DESTINO_DELEGACION_LUN","DESTINO_DELEGACION_DOM","DESTINO_DELEGACION_DIF","DESTINO_DELEGACION_MATCH","DESTINO_CIUDAD_LUN","DESTINO_CIUDAD_DOM","DESTINO_CIUDAD_DIF","DESTINO_CIUDAD_MATCH","DESTINO_CLAVE_EDIFICIO_LUN","DESTINO_CLAVE_EDIFICIO_DOM","DESTINO_CLAVE_EDIFICIO_DIF","DESTINO_CLAVE_EDIFICIO_MATCH","PRODUCTCODE_LUN","PRODUCTCODE_DOM","PRODUCTCODE_DIF","DESTINO_CP_LUN","DESTINO_CP_DOM","DESTINO_CP_DIF","DESTINO_CP_MACTCH","WIDDIM_PRODUCTO_LUN","WIDDIM_PRODUCTO_DOM","WIDDIM_PRODUCTO_DIF","WIDDIM_PRODUCTO_MATCH"</td>
</tr>
<tr>
<td class="tabhead" width="10%">Physical Properties</td>
<td class="tabdata" width="90%">NO INMEMORY</td>
</tr>
<tr>
<td class="tabhead" width="10%">Build Mode</td>
<td class="tabdata" width="90%">IMMEDIATE</td>
</tr>
<tr>
<td class="tabhead" width="10%">Query Rewrite</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
<tr>
<td class="tabhead" width="10%">On Query Computation</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
</table>
<br>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Refresh Type</td>
<td class="tabdata" width="90%">FORCE</td>
</tr>
<tr>
<td class="tabhead" width="10%">Refresh On</td>
<td class="tabdata" width="90%">DEMAND</td>
</tr>
</table>
<br>
<div class="caption2"><p>Subquery</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead"><pre><code>AS<br> WITH TIEMPO AS (SELECT DISTINCT<br>         max(anio) anio,<br>         semana,<br>         semana_comienza,<br>         semana_finaliza,<br>         semana_desc<br>     FROM<br> TTC_DIM_TIEMPO<br>     WHERE<br>             1 = 1<br> AND trunc(semana_comienza, 'MONTH') BETWEEN trunc(add_months(sysdate, - 48), 'MONTH') AND trunc(sysdate)<br> AND DIA_DATE &lt;= SYSDATE<br> GROUP BY semana,<br>         semana_comienza,<br>         semana_finaliza,<br>         semana_desc<br> <br>     ORDER BY<br>         2 DESC<br> )<br> SELECT<br> CASE WHEN DOM.ID IS NULL THEN LUN.ID ELSE DOM.ID END AS ID,<br> CASE WHEN DOM.WIDMT_OPORTUNIDAD_DETALLE IS NULL THEN LUN.WIDMT_OPORTUNIDAD_DETALLE ELSE DOM.WIDMT_OPORTUNIDAD_DETALLE END AS WIDMT_OPORTUNIDAD_DETALLE,<br> CASE WHEN DOM.WIDMT_OPORTUNIDAD IS NULL THEN LUN.WIDMT_OPORTUNIDAD ELSE DOM.WIDMT_OPORTUNIDAD END AS WIDMT_OPORTUNIDAD,<br> CASE WHEN DOM.CURRENCYISOCODE IS NULL THEN LUN.CURRENCYISOCODE ELSE DOM.CURRENCYISOCODE END AS CURRENCYISOCODE,<br> CASE WHEN DOM.TOTALPRICE IS NULL THEN LUN.TOTALPRICE ELSE DOM.TOTALPRICE END AS TOTALPRICE,<br> CASE WHEN DOM.UNITPRICE IS NULL THEN LUN.UNITPRICE ELSE DOM.UNITPRICE END AS UNITPRICE,<br> CASE WHEN DOM.LISTPRICE IS NULL THEN LUN.LISTPRICE ELSE DOM.LISTPRICE END AS LISTPRICE,<br> CASE WHEN DOM.CREATEDDATE IS NULL THEN LUN.CREATEDDATE ELSE DOM.CREATEDDATE END AS CREATEDDATE,	<br> CASE WHEN DOM.WIDDIM_USUARIO_CREATEDBY IS NULL THEN LUN.WIDDIM_USUARIO_CREATEDBY ELSE DOM.WIDDIM_USUARIO_CREATEDBY END AS WIDDIM_USUARIO_CREATEDBY,<br> CASE WHEN DOM.LASTMODIFIEDDATE IS NULL THEN LUN.LASTMODIFIEDDATE ELSE DOM.LASTMODIFIEDDATE END AS LASTMODIFIEDDATE,<br> CASE WHEN DOM.WIDDIM_USUARIO_LASTMODBY IS NULL THEN LUN.WIDDIM_USUARIO_LASTMODBY ELSE DOM.WIDDIM_USUARIO_LASTMODBY END AS WIDDIM_USUARIO_LASTMODBY,<br> CASE WHEN DOM.DESTINO_ENTRECALLES IS NULL THEN LUN.DESTINO_ENTRECALLES ELSE DOM.DESTINO_ENTRECALLES END AS DESTINO_ENTRECALLES,<br> CASE WHEN DOM.DESTINO_EMPRESA IS NULL THEN LUN.DESTINO_EMPRESA ELSE DOM.DESTINO_EMPRESA END AS DESTINO_EMPRESA,<br> CASE WHEN DOM.DESTINO_UBICACION IS NULL THEN LUN.DESTINO_UBICACION ELSE DOM.DESTINO_UBICACION END AS DESTINO_UBICACION,<br> CASE WHEN DOM.DESTINO_PAIS IS NULL THEN LUN.DESTINO_PAIS ELSE DOM.DESTINO_PAIS END AS DESTINO_PAIS,<br> CASE WHEN DOM.VENTA_NETA IS NULL THEN LUN.VENTA_NETA ELSE DOM.VENTA_NETA END AS VENTA_NETA,<br> CASE WHEN DOM.DESCT IS NULL THEN LUN.DESCT ELSE DOM.DESCT END AS DESCT,<br> LUN.SEMANA_COMIENZA                                  AS FECHA_LUN,<br> CASE WHEN DOM.SEMANA_finaliza &gt; TRUNC(SYSDATE) THEN TRUNC(SYSDATE) ELSE  DOM.SEMANA_finaliza END<br>                                                         AS FECHA_DOM,<br> LUN.FAMILIA_PRODUCTO                     AS FAMILIA_PRODUCTO_LUN,<br> DOM.FAMILIA_PRODUCTO                        AS FAMILIA_PRODUCTO_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (DOM.FAMILIA_PRODUCTO)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.FAMILIA_PRODUCTO)), 'US7ASCII')),0, 'N','Y')<br>                                             AS FAMILIA_PRODUCTO_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.FAMILIA_PRODUCTO)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.FAMILIA_PRODUCTO)), 'US7ASCII'))  <br>                                             AS FAMILIA_PRODUCTO_MATCH,<br> LUN.NAME AS NAME_LUN,<br> DOM.NAME AS NAME_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (DOM.NAME)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.NAME)), 'US7ASCII')),0, 'N','Y')<br>                                             AS NAME_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.NAME)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.NAME)), 'US7ASCII'))  <br>                                             AS NAME_MATCH,<br> LUN.QUANTITY                             AS QUANTITY_LUN,<br> DOM.QUANTITY                                AS QUANTITY_DOM,<br> DECODE(UTL_MATCH.edit_distance(DOM.QUANTITY, LUN.QUANTITY), 0, 'N', 'Y')  <br>                                             AS QUANTITY_DIF,<br> <br> LUN.DESTINO_CALLENUMERO                  AS DESTINO_CALLENUMERO_LUN,<br> DOM.DESTINO_CALLENUMERO                     AS DESTINO_CALLENUMERO_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_CALLENUMERO,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_CALLENUMERO,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_CALLENUMERO_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.DESTINO_CALLENUMERO)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.DESTINO_CALLENUMERO)), 'US7ASCII'))  <br>                                             AS DESTINO_CALLENUMERO_MATCH,<br> LUN.DESTINO_PISO                         AS DESTINO_PISO_LUN,<br> DOM.DESTINO_PISO                            AS DESTINO_PISO_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM(nvl(DOM.DESTINO_PISO,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (nvl(LUN.DESTINO_PISO,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_PISO_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.DESTINO_PISO)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.DESTINO_PISO)), 'US7ASCII'))  <br>                                             AS DESTINO_PISO_MATCH,<br> LUN.DESTINO_COLONIA                      AS DESTINO_COLONIA_LUN,<br> DOM.DESTINO_COLONIA                         AS DESTINO_COLONIA_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_COLONIA,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_COLONIA,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_COLONIA_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.DESTINO_COLONIA)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.DESTINO_COLONIA)), 'US7ASCII'))  <br>                                             AS DESTINO_COLONIA_MATCH,<br> LUN.DESTINO_DELEGACION                   AS DESTINO_DELEGACION_LUN,<br> DOM.DESTINO_DELEGACION                      AS DESTINO_DELEGACION_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_DELEGACION,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_DELEGACION,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_DELEGACION_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.DESTINO_DELEGACION)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.DESTINO_DELEGACION)), 'US7ASCII'))  <br>                                             AS DESTINO_DELEGACION_MATCH,<br> LUN.DESTINO_CIUDAD                       AS DESTINO_CIUDAD_LUN,<br> DOM.DESTINO_CIUDAD                          AS DESTINO_CIUDAD_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_CIUDAD,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_CIUDAD,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_CIUDAD_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (nvl(DOM.DESTINO_CIUDAD,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (nvl(LUN.DESTINO_CIUDAD,0))), 'US7ASCII'))  <br>                                             AS DESTINO_CIUDAD_MATCH,<br> LUN.DESTINO_CLAVE_EDIFICIO               AS DESTINO_CLAVE_EDIFICIO_LUN,<br> DOM.DESTINO_CLAVE_EDIFICIO                  AS DESTINO_CLAVE_EDIFICIO_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_CLAVE_EDIFICIO,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_CLAVE_EDIFICIO,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_CLAVE_EDIFICIO_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (DOM.DESTINO_CLAVE_EDIFICIO)), 'US7ASCII'),CONVERT (UPPER (TRIM (LUN.DESTINO_CLAVE_EDIFICIO)), 'US7ASCII'))  <br>                                             AS DESTINO_CLAVE_EDIFICIO_MATCH,<br> LUN.PRODUCTCODE  AS PRODUCTCODE_LUN,<br> DOM.PRODUCTCODE  AS PRODUCTCODE_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.PRODUCTCODE,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.PRODUCTCODE,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS PRODUCTCODE_DIF,<br> LUN.DESTINO_CP                           AS DESTINO_CP_LUN,<br> DOM.DESTINO_CP                              AS DESTINO_CP_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.DESTINO_CP,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.DESTINO_CP,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS DESTINO_CP_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (nvl(DOM.DESTINO_CP,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (nvl(LUN.DESTINO_CP,0))), 'US7ASCII'))  <br>                                             AS DESTINO_CP_MACTCH,<br> LUN.WIDDIM_PRODUCTO                      AS WIDDIM_PRODUCTO_LUN,<br> DOM.WIDDIM_PRODUCTO                         AS WIDDIM_PRODUCTO_DOM,<br> DECODE (UTL_MATCH.edit_distance (CONVERT (UPPER (TRIM (NVL(DOM.WIDDIM_PRODUCTO,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (NVL(LUN.WIDDIM_PRODUCTO,0))), 'US7ASCII')),0, 'N','Y')<br>                                             AS WIDDIM_PRODUCTO_DIF,<br> UTL_MATCH.EDIT_DISTANCE_SIMILARITY(CONVERT (UPPER (TRIM (nvl(DOM.WIDDIM_PRODUCTO,0))), 'US7ASCII'),CONVERT (UPPER (TRIM (nvl(LUN.WIDDIM_PRODUCTO,0))), 'US7ASCII'))  <br>                                             AS WIDDIM_PRODUCTO_MATCH<br> FROM<br>    (SELECT OP.*, anio ANIO,            semana,<br>             semana_comienza,<br>             semana_desc FROM  TTC_MT_OPORTUNIDADES_DET_SCD OP, TIEMPO <br>             WHERE 1=1<br>             AND                 1 = 1<br>             AND (semana_comienza + 1) BETWEEN TRUNC(OP.SCD_FECHA_INICIO) AND TRUNC(OP.SCD_FECHA_FIN) - 1<br>             )LUN<br>             FULL OUTER JOIN   (SELECT OP.*,  anio ANIO,           semana SEMANA,<br>             semana_finaliza,<br>             semana_desc FROM TTC_MT_OPORTUNIDADES_DET_SCD OP, TIEMPO<br>             WHERE 1=1<br>             AND                 1 = 1<br>           AND (semana_finaliza + 1)  BETWEEN TRUNC (OP.SCD_FECHA_INICIO)<br>                                    AND TRUNC (OP.SCD_FECHA_FIN) - 1<br>             )DOM ON LUN.WIDMT_OPORTUNIDAD_DETALLE = DOM.WIDMT_OPORTUNIDAD_DETALLE<br> AND LUN.SEMANA = DOM.SEMANA<br> AND LUN.ANIO = DOM.ANIO</code></pre></td>
</tr>
</table>
<br>
<div class="itemEnd"><p>&nbsp;</p></div></div>
<div id="MView_{087F8D27-7D76-4540-B34A-0DEB432C94B7}" class="item">
<a name = "MView_{087F8D27-7D76-4540-B34A-0DEB432C94B7}"></a>
<div class="caption1"><p>BI_BM_ENT.TTC_VM_OPP_FUNEL</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Caption</td>
<td class="tabdata" width="90%">TTC_VM_OPP_FUNEL</td>
</tr>
<tr>
<td class="tabhead" width="10%">Column Aliases</td>
<td class="tabdata" width="90%">"ID","NUMERO_DE_OPORTUNIDAD","WIDDIM_USUARIO_CREATEDBY","WIDMT_CUENTA","FECHA_LUN","FECHA_DOM","FLAG_LUN","FLAG_DOM","PLAZOS_DE_CONTRATACION_LUN","PLAZOS_DE_CONTRATACION_DOM","PLAZOS_DE_CONTRATACION_DIF","TIPO_DE_MOVIMIENTO_LUN","TIPO_DE_MOVIMIENTO_DOM","TIPO_DE_MOVIMIENTO_DIF","PROBABILIDAD_CIERRE_DE_VENTA_LUN","PROBABILIDAD_CIERRE_DE_VENTA_DOM","PROBABILIDAD_CIERRE_DE_VENTA_DIF","STAGENAME_LUN","STAGENAME_DOM","STAGENAME_DOM_DIF","CLOSEDATE_LUN","CLOSEDATE_DOM","CLOSEDATE_DIF","AMOUNT_LUN","AMOUNT_DOM","AMOUNT_DIF","OTC_LUN","OTC_DOM","OTC_DIF","OTC_TOTAL_DE_OPORTUNIDAD_LUN","OTC_TOTAL_DE_OPORTUNIDAD_DOM","OTC_TOTAL_DE_OPORTUNIDAD_DIF","PROBABILITY_LUN","PROBABILITY_DOM","PROBABILITY_DIF","PLAZO_RENTA_LUN","PLAZO_RENTA_DOM","PLAZO_RENTA_DIF","VENTA_NETA_LUN","VENTA_NETA_DOM","VENTA_NETA_DIF","VENTA_NETA_MENSUAL_LUN","VENTA_NETA_MENSUAL_DOM","VENTA_NETA_MENSUAL_DIF","FCV_LUN","FCV_DOM","FCV_DIF","VALOR_TOTAL_CONTRATO_LUN","VALOR_TOTAL_CONTRATO_DOM","VALOR_TOTAL_CONTRATO_DIF","STATUS_COMERCIAL","FECHA_80_1A_VEZ","LLEGO_80_1A_VEZ"</td>
</tr>
<tr>
<td class="tabhead" width="10%">Physical Properties</td>
<td class="tabdata" width="90%">NO INMEMORY</td>
</tr>
<tr>
<td class="tabhead" width="10%">Build Mode</td>
<td class="tabdata" width="90%">IMMEDIATE</td>
</tr>
<tr>
<td class="tabhead" width="10%">Query Rewrite</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
<tr>
<td class="tabhead" width="10%">On Query Computation</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
</table>
<br>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Refresh Type</td>
<td class="tabdata" width="90%">FORCE</td>
</tr>
<tr>
<td class="tabhead" width="10%">Refresh On</td>
<td class="tabdata" width="90%">DEMAND</td>
</tr>
</table>
<br>
<div class="caption2"><p>Subquery</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead"><pre><code>AS<br> WITH TIEMPO <br>         AS (  SELECT DISTINCT MAX (anio) anio,<br>                               semana,<br>                               semana_comienza,<br>                               semana_finaliza,<br>                               semana_desc<br>                 FROM TTC_DIM_TIEMPO<br>                WHERE     1 = 1<br>                      AND TRUNC (semana_comienza, 'MONTH') BETWEEN TRUNC (<br>                                                                     ADD_MONTHS (<br>                                                                         SYSDATE,<br>                                                                         -48),<br>                                                                      'MONTH')<br>                                                               AND TRUNC (<br>                                                                      SYSDATE)<br>                      AND DIA_DATE &lt;= SYSDATE<br>             GROUP BY semana,<br>                      semana_comienza,<br>                      semana_finaliza,<br>                      semana_desc<br>             ORDER BY 2 DESC)<br> SELECT CASE WHEN DOM.ID IS NULL THEN LUN.ID ELSE DOM.ID END ID,       <br>        CASE WHEN TRIM(DOM.NUMERO_DE_OPORTUNIDAD) IS NULL THEN LUN.NUMERO_DE_OPORTUNIDAD ELSE DOM.NUMERO_DE_OPORTUNIDAD END AS NUMERO_DE_OPORTUNIDAD,<br>        CASE WHEN DOM.WIDDIM_USUARIO_CREATEDBY IS NULL THEN LUN.WIDDIM_USUARIO_CREATEDBY ELSE DOM.WIDDIM_USUARIO_CREATEDBY END AS WIDDIM_USUARIO_CREATEDBY,<br>        CASE WHEN DOM.WIDMT_CUENTA IS NULL THEN LUN.WIDMT_CUENTA ELSE LUN.WIDMT_CUENTA END AS WIDMT_CUENTA,<br>        to_char(LUN.SEMANA_COMIENZA,'dd/mm/yyyy') AS FECHA_LUN,<br>        CASE<br>           WHEN DOM.SEMANA_finaliza &gt; TRUNC (SYSDATE) THEN to_char(TRUNC (SYSDATE),'dd/mm/yyyy')<br>           ELSE to_char(DOM.SEMANA_finaliza,'dd/mm/yyyy')<br>        END<br>           AS FECHA_DOM,<br>        LUN.SCD_FLG_ACTUAL AS FLAG_LUN,<br>        DOM.SCD_FLG_ACTUAL AS FLAG_DOM,<br>        LUN.PLAZOS AS PLAZOS_DE_CONTRATACION_LUN,<br>        DOM.PLAZOS AS PLAZOS_DE_CONTRATACION_DOM,<br>        (NVL(DOM.PLAZOS,0) - NVL(LUN.PLAZOS,0))<br>           AS PLAZOS_DE_CONTRATACION_DIF,<br>        LUN.TIPO_DE_MOVIMIENTO AS TIPO_DE_MOVIMIENTO_LUN,<br>        DOM.TIPO_DE_MOVIMIENTO AS TIPO_DE_MOVIMIENTO_DOM,<br>        DECODE (<br>           UTL_MATCH.edit_distance (NVL (DOM.TIPO_DE_MOVIMIENTO, 0),<br>                                    NVL (LUN.TIPO_DE_MOVIMIENTO, 0)),<br>           0, 'N',<br>           'Y')<br>           AS TIPO_DE_MOVIMIENTO_DIF,<br>        LUN.PROBABILIDAD_CIERRE_DE_VENTA<br>           AS PROBABILIDAD_CIERRE_DE_VENTA_LUN,<br>        DOM.PROBABILIDAD_CIERRE_DE_VENTA AS PROBABILIDAD_CIERRE_DE_VENTA_DOM,<br>        DECODE (<br>           UTL_MATCH.edit_distance (<br>              NVL (DOM.PROBABILIDAD_CIERRE_DE_VENTA, 0),<br>              NVL (LUN.PROBABILIDAD_CIERRE_DE_VENTA, 0)),<br>           0, 'N',<br>           'Y')<br>           AS PROBABILIDAD_CIERRE_DE_VENTA_DIF,<br>        LUN.STAGENAME AS STAGENAME_LUN,<br>        DOM.STAGENAME AS STAGENAME_DOM,<br>        DECODE (UTL_MATCH.edit_distance (DOM.STAGENAME, LUN.STAGENAME),<br>                0, 'N',<br>                'Y')<br>           AS STAGENAME_DOM_DIF,<br>        LUN.CLOSEDATE AS CLOSEDATE_LUN,<br>        DOM.CLOSEDATE AS CLOSEDATE_DOM,<br>        DOM.CLOSEDATE - LUN.CLOSEDATE AS CLOSEDATE_DIF,<br>        LUN.AMOUNT AS AMOUNT_LUN,<br>        DOM.AMOUNT AS AMOUNT_DOM,<br>        nvl(DOM.AMOUNT,0) - nvl(LUN.AMOUNT,0)  AS AMOUNT_DIF,        <br>        LUN.OTC AS OTC_LUN,<br>        DOM.OTC AS OTC_DOM,<br>        (NVL(DOM.OTC,0) - NVL(LUN.OTC,0)) AS OTC_DIF,<br>        LUN.OTC_TOTAL_DE_OPORTUNIDAD AS OTC_TOTAL_DE_OPORTUNIDAD_LUN,<br>        DOM.OTC_TOTAL_DE_OPORTUNIDAD AS OTC_TOTAL_DE_OPORTUNIDAD_DOM,<br>        (NVL(DOM.OTC_TOTAL_DE_OPORTUNIDAD,0) - NVL(LUN.OTC_TOTAL_DE_OPORTUNIDAD,0))    AS OTC_TOTAL_DE_OPORTUNIDAD_DIF,<br>        LUN.PROBABILITY AS PROBABILITY_LUN,<br>        DOM.PROBABILITY AS PROBABILITY_DOM,<br>        NVL(DOM.PROBABILITY,0) - NVL(LUN.PROBABILITY,0) AS PROBABILITY_DIF,<br>        LUN.PLAZO_RENTA AS PLAZO_RENTA_LUN,<br>        DOM.PLAZO_RENTA AS PLAZO_RENTA_DOM,<br>        (NVL(DOM.PLAZO_RENTA,0) - NVL(LUN.PLAZO_RENTA,0)) AS PLAZO_RENTA_DIF,<br>        LUN.VENTA_NETA AS VENTA_NETA_LUN,<br>        DOM.VENTA_NETA AS VENTA_NETA_DOM,<br>        (NVL(DOM.VENTA_NETA,0) - NVL(LUN.VENTA_NETA,0)) AS VENTA_NETA_DIF,<br>        LUN.VENTA_NETA_MENSUAL AS VENTA_NETA_MENSUAL_LUN,<br>        DOM.VENTA_NETA_MENSUAL AS VENTA_NETA_MENSUAL_DOM,<br>        (NVL(DOM.VENTA_NETA_MENSUAL,0) - NVL(LUN.VENTA_NETA_MENSUAL,0))    AS VENTA_NETA_MENSUAL_DIF,<br>        DOM.FCV AS FCV_LUN,<br>        LUN.FCV AS FCV_DOM,<br>        (NVL(DOM.FCV,0) - NVL(LUN.FCV,0)) AS FCV_DIF,<br>        LUN.VALOR_TOTAL_CONTRATO AS VALOR_TOTAL_CONTRATO_LUN,<br>        DOM.VALOR_TOTAL_CONTRATO AS VALOR_TOTAL_CONTRATO_DOM,<br>        (NVL(DOM.VALOR_TOTAL_CONTRATO,0) - NVL(LUN.VALOR_TOTAL_CONTRATO,0)) AS VALOR_TOTAL_CONTRATO_DIF,<br>        CASE WHEN DOM.STATUS_COMERCIAL IS NULL THEN LUN.STATUS_COMERCIAL ELSE DOM.STATUS_COMERCIAL END AS STATUS_COMERCIAL,<br>        CASE WHEN DOM.FECHA_80_1A_VEZ IS NULL THEN LUN.FECHA_80_1A_VEZ ELSE DOM.FECHA_80_1A_VEZ END AS FECHA_80_1A_VEZ,<br>        CASE WHEN DOM.LLEGO_80_1A_VEZ IS NULL THEN LUN.LLEGO_80_1A_VEZ ELSE DOM.LLEGO_80_1A_VEZ END AS LLEGO_80_1A_VEZ<br>   FROM (SELECT OP.*,<br>                         CASE<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%AÑOS%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%años%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%AÑO%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%yea%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0)) * 12<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%MESES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%meses%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%MES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mont%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0))<br>                 ELSE<br>                     TO_NUMBER(NVL(TRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION, 'abcdefghiíhklmnñopqrstuvwxyzABCDEFGHIÍHKLMNÑOPQRSTUVWXYZ-/'<br>                     , ' ')), 0))<br>             END AS PLAZOS,<br>                anio ANIO,<br>                semana,<br>                semana_comienza,<br>                semana_desc<br>           FROM ttc_mt_oportunidades_scd OP, TIEMPO<br>          WHERE     1 = 1<br>                AND 1 = 1<br>                AND (semana_comienza +1) BETWEEN TRUNC (OP.SCD_FECHA_INICIO)<br>                                            AND TRUNC (OP.SCD_FECHA_FIN) - 1)<br>        LUN <br> FULL OUTER JOIN (SELECT OP.*,<br>                         CASE<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%AÑOS%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%años%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%AÑO%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%yea%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0)) * 12<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%MESES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%meses%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%MES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mont%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0))<br>                 ELSE<br>                     TO_NUMBER(NVL(TRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION, 'abcdefghiíhklmnñopqrstuvwxyzABCDEFGHIÍHKLMNÑOPQRSTUVWXYZ-/'<br>                     , ' ')), 0))                    <br>             END AS PLAZOS,                 <br>                anio ANIO,           semana SEMANA,<br>                semana_comienza,<br>             semana_finaliza,<br>             semana_desc FROM ttc_mt_oportunidades_scd OP, TIEMPO <br>             WHERE 1=1<br>                AND (semana_finaliza +1)  BETWEEN TRUNC (OP.SCD_FECHA_INICIO)<br>                                            AND TRUNC (OP.SCD_FECHA_FIN) - 1)<br>        DOM  ON LUN.WIDMT_OPORTUNIDAD = DOM.WIDMT_OPORTUNIDAD<br>                     AND LUN.SEMANA = DOM.SEMANA<br>                     AND LUN.ANIO = DOM.ANIO</code></pre></td>
</tr>
</table>
<br>
<div class="itemEnd"><p>&nbsp;</p></div></div>
<div id="MView_{C4CE5138-1962-4AE7-B00F-E52090D0F7BC}" class="item">
<a name = "MView_{C4CE5138-1962-4AE7-B00F-E52090D0F7BC}"></a>
<div class="caption1"><p>BI_BM_ENT.TTC_VM_OPP_FUNEL_TEST</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Caption</td>
<td class="tabdata" width="90%">TTC_VM_OPP_FUNEL_TEST</td>
</tr>
<tr>
<td class="tabhead" width="10%">Column Aliases</td>
<td class="tabdata" width="90%">"ROWNUM","ROW_ID_LUN","ROW_ID_DOM","ID_DOM","NUMERO_DE_OPORTUNIDAD","WIDDIM_USUARIO_CREATEDBY","WIDMT_CUENTA","FECHA_LUN","FECHA_DOM","FLAG_LUN","FLAG_DOM","PLAZOS_DE_CONTRATACION_LUN","PLAZOS_DE_CONTRATACION_DOM","PLAZOS_DE_CONTRATACION_DIF"</td>
</tr>
<tr>
<td class="tabhead" width="10%">Physical Properties</td>
<td class="tabdata" width="90%">NO INMEMORY</td>
</tr>
<tr>
<td class="tabhead" width="10%">Build Mode</td>
<td class="tabdata" width="90%">IMMEDIATE</td>
</tr>
<tr>
<td class="tabhead" width="10%">Query Rewrite</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
<tr>
<td class="tabhead" width="10%">On Query Computation</td>
<td class="tabdata" width="90%">DISABLE</td>
</tr>
</table>
<br>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Refresh Type</td>
<td class="tabdata" width="90%">FAST</td>
</tr>
<tr>
<td class="tabhead" width="10%">Refresh On</td>
<td class="tabdata" width="90%">DEMAND</td>
</tr>
</table>
<br>
<div class="caption2"><p>Subquery</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead"><pre><code>AS<br> WITH TIEMPO <br>         AS (  SELECT DISTINCT MAX (anio) anio,<br>                               semana,<br>                               semana_comienza,<br>                               semana_finaliza,<br>                               semana_desc<br>                 FROM TTC_DIM_TIEMPO_1<br>                WHERE     1 = 1<br>                      AND TRUNC (semana_comienza, 'MONTH') BETWEEN TRUNC (<br>                                                                     ADD_MONTHS (<br>                                                                         SYSDATE,<br>                                                                         -48),<br>                                                                      'MONTH')<br>                                                               AND TRUNC (<br>                                                                      SYSDATE)<br>                      AND DIA_DATE &lt;= SYSDATE<br>  --                    AND SEMANA = 4                            --  any (3,4,5)<br>  --                    AND ANIO = 2020<br>             GROUP BY semana,<br>                      semana_comienza,<br>                      semana_finaliza,<br>                      semana_desc<br>             ORDER BY 2 DESC)<br> SELECT ROWNUM,LUN.ROW_ID ROW_ID_LUN, DOM.ROW_ID ROW_ID_DOM, DOM.ID id_DOM,       <br>        DOM.NUMERO_DE_OPORTUNIDAD AS NUMERO_DE_OPORTUNIDAD,<br>        DOM.WIDDIM_USUARIO_CREATEDBY AS WIDDIM_USUARIO_CREATEDBY,<br>        DOM.WIDMT_CUENTA AS WIDMT_CUENTA,<br>        to_char(LUN.SEMANA_COMIENZA,'dd/mm/yyyy') AS FECHA_LUN,<br>        CASE<br>           WHEN DOM.SEMANA_finaliza &gt; TRUNC (SYSDATE) THEN to_char(TRUNC (SYSDATE),'dd/mm/yyyy')<br>           ELSE to_char(DOM.SEMANA_finaliza,'dd/mm/yyyy')<br>        END<br>           AS FECHA_DOM,<br>        LUN.SCD_FLG_ACTUAL AS FLAG_LUN,<br>        DOM.SCD_FLG_ACTUAL AS FLAG_DOM,<br>        LUN.PLAZOS AS PLAZOS_DE_CONTRATACION_LUN,<br>        DOM.PLAZOS AS PLAZOS_DE_CONTRATACION_DOM,<br>        (DOM.PLAZOS - LUN.PLAZOS)<br>           AS PLAZOS_DE_CONTRATACION_DIF<br>   FROM (SELECT OP.*,<br>                         CASE<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%AÑOS%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%años%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%AÑO%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%yea%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0)) * 12<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%MESES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%meses%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%MES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mont%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0))<br>                 ELSE<br>                     TO_NUMBER(NVL(TRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION, 'abcdefghiíhklmnñopqrstuvwxyzABCDEFGHIÍHKLMNÑOPQRSTUVWXYZ-/'<br>                     , ' ')), 0))<br>             END AS PLAZOS,<br>                anio ANIO,<br>                semana,<br>                semana_comienza,<br>                semana_desc<br>           FROM ttc_mt_oportunidades_scd OP, TIEMPO<br>          WHERE     1 = 1<br>                AND 1 = 1<br>                AND (semana_comienza +1) BETWEEN TRUNC (OP.SCD_FECHA_INICIO)<br>                                            AND TRUNC (OP.SCD_FECHA_FIN) - 1)<br>        LUN <br> FULL OUTER JOIN (SELECT OP.*,<br>                         CASE<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%AÑOS%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%años%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%AÑO%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Año%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%yea%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0)) * 12<br>                 WHEN OP.PLAZOS_DE_CONTRATACION LIKE '%MESES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%meses%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%MES%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%Mes%'<br>                      OR OP.PLAZOS_DE_CONTRATACION LIKE '%mont%' THEN<br>                     TO_NUMBER(NVL(TRIM(REGEXP_SUBSTR(LTRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION<br>                     , TRANSLATE(OP.PLAZOS_DE_CONTRATACION, '1234567890', ' '), ' '<br>                     )), '(\S*)')), 0))<br>                 ELSE<br>                     TO_NUMBER(NVL(TRIM(TRANSLATE(OP.PLAZOS_DE_CONTRATACION, 'abcdefghiíhklmnñopqrstuvwxyzABCDEFGHIÍHKLMNÑOPQRSTUVWXYZ-/'<br>                     , ' ')), 0))                    <br>             END AS PLAZOS,                 <br>                anio ANIO,           semana SEMANA,<br>                semana_comienza,<br>             semana_finaliza,<br>             semana_desc FROM ttc_mt_oportunidades_scd OP, TIEMPO <br>             WHERE 1=1<br>                AND (semana_finaliza +1)  BETWEEN TRUNC (OP.SCD_FECHA_INICIO)<br>                                            AND TRUNC (OP.SCD_FECHA_FIN) - 1)<br>        DOM  ON LUN.WIDMT_OPORTUNIDAD = DOM.WIDMT_OPORTUNIDAD<br>                     AND LUN.SEMANA = DOM.SEMANA<br>                     AND LUN.ANIO = DOM.ANIO</code></pre></td>
</tr>
</table>
<br>
<div class="itemEnd"><p>&nbsp;</p></div></div>
<div id="MView_{6A672F35-46D5-484D-8021-7A9B66B5F9AD}" class="item">
<a name = "MView_{6A672F35-46D5-484D-8021-7A9B66B5F9AD}"></a>
<div class="caption1"><p>MaterializedView1</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead" width="10%">Caption</td>
<td class="tabdata" width="90%">MaterializedView1</td>
</tr>
</table>
<br>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
</table>
<br>
<div class="caption2"><p>Subquery</p></div>
<table class="tabformat" border="0" cellpadding="2" cellspacing="1" width="100%">
<tr>
<td class="tabhead"><pre><code>AS /*select_statement*/</code></pre></td>
</tr>
</table>
<br>
<div class="itemEnd"><p>&nbsp;</p></div></div>
</div><div id="footer"><div class="pageFooter">Copyright &copy; Sitename 2005</div><div class="footerEnd"><p></p></div></div></div></div></body></html>
